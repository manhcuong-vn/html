<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <title>SCADA Web</title>

  <style>
    body {
      font-family: Arial, sans-serif;
      background: #0f172a;
      color: #e5e7eb;
      margin: 0;
      padding: 20px;
    }

    h1 {
      text-align: center;
      margin-bottom: 30px;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
    }

    .card {
      background: #111827;
      border-radius: 12px;
      padding: 20px;
      box-shadow: 0 0 15px rgba(0,0,0,0.4);
    }

    .label {
      font-size: 14px;
      color: #9ca3af;
    }

    .value {
      font-size: 36px;
      font-weight: bold;
      margin-top: 8px;
    }

    .unit {
      font-size: 16px;
      color: #9ca3af;
      margin-left: 4px;
    }

    .footer {
      text-align: center;
      margin-top: 20px;
      font-size: 12px;
      color: #6b7280;
    }
  </style>
</head>

<body>

  <h1>SCADA WEB MONITOR</h1>

  <div class="grid">
    <div class="card">
      <div class="label">Nhiệt độ</div>
      <div class="value">
        <span id="temp">--</span>
        <span class="unit">°C</span>
      </div>
    </div>

    <div class="card">
      <div class="label">Áp suất</div>
      <div class="value">
        <span id="pressure">--</span>
        <span class="unit">bar</span>
      </div>
    </div>

    <div class="card">
      <div class="label">Tốc độ động cơ</div>
      <div class="value">
        <span id="speed">--</span>
        <span class="unit">rpm</span>
      </div>
    </div>

    <div class="card">
      <div class="label">Dòng điện</div>
      <div class="value">
        <span id="current">--</span>
        <span class="unit">A</span>
      </div>
    </div>
  </div>

  <div class="footer">
    Last update: <span id="time">--</span>
  </div>

  <script>
    async function fetchData() {
        try {
        const res = await fetch("https://web-scada.webnewbiemc.io.vn/api/data");
        if (!res.ok) throw new Error(res.status);

        const d = await res.json();

        document.getElementById("temp").textContent =
            d.temp?.toFixed(1) ?? "--";

        document.getElementById("pressure").textContent =
            d.pressure?.toFixed(2) ?? "--";

        document.getElementById("speed").textContent =
            d.motor?.speed ?? "--";

        document.getElementById("current").textContent =
            d.motor?.current ?? "--";

        document.getElementById("time").textContent =
            new Date(d.ts).toLocaleTimeString();

        } catch (e) {
        console.error("API error", e);
        document.getElementById("time").textContent = "OFFLINE";
        }
    }

    fetchData();
    setInterval(fetchData, 1000);
</script>


</body>
</html>
